@import url("https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=IM+Fell+English+SC&display=swap");

:root {
  --bg-dark: #1a1a1a;
  --panel-bg: #1f1614;
  --panel-border: #e6c253;
  --text-light: #e0e0e0;
  --text-gold: #e6c253;
  --header-bg: #3a2e2a;
  --header-hover: #4a3f3c;
  --content-bg: #2a221f;
  --input-bg: #1a1a1a;
  --input-border: #4a3f3c;
  --button-primary-bg: linear-gradient(to bottom, #8c5a2d, #593a1d);
  --button-primary-hover: linear-gradient(to bottom, #a16a35, #6b4623);
  --button-vision-bg: linear-gradient(to bottom, #2d8c3e, #1d5927);
  --button-vision-hover: linear-gradient(to bottom, #35a14a, #236b2f);
  --nav-bg: #110d0c;
  --nav-hover-bg: #2a221f;
}

body {
  margin: 0;
  font-family: "Cinzel", serif;
  background-color: var(--bg-dark);
  color: var(--text-light);
  overflow: hidden;
}

/* --- ESTRUCTURA GENERAL DEL DASHBOARD --- */
.dm-dashboard {
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  /* Columnas con ancho fijo y una flexible */
  grid-template-rows: auto 1fr auto;
  grid-template-areas:
    "header header header"
    "left   main   right"
    "footer footer footer";
  height: 100vh;
  gap: 10px;
  /*padding: 10px;*/
  box-sizing: border-box;
}

.dashboard-header {
  grid-area: header;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  background: var(--panel-bg);
  /*border-radius: 8px;*/
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
  border: 1px solid var(--input-border);
}

.dashboard-header .panel-logo {
  max-width: 50px;
}

.dashboard-header .panel-title-container {
  border: none;
  text-align: center;
  padding: 0;
  margin: 0;
}

.dashboard-header .panel-title-container h2,
.dashboard-header .panel-subtitle {
  margin: 0;
  padding: 0;
}

.dashboard-header .header-actions {
  display: flex;
  gap: 10px;
}

.dashboard-header .header-actions button {
  margin: 0;
  width: auto;
}
/*boton borrar de estados*/
.state-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 15px; /* Increased padding for better spacing */
  margin-bottom: 5px; /* Added margin between list items */
  background-color: #333; /* Dark background color */
  color: #fff; /* White text color */
  border-radius: 8px; /* Rounded corners */
  animation: slideIn 0.3s ease-out;
}
.state-item:hover {
  background: linear-gradient(
    135deg,
    rgba(255, 215, 0, 0.1) 0%,
    rgba(255, 215, 0, 0.05) 100%
  );
  border-color: rgba(255, 215, 0, 0.3);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

.state-emoji {
  font-size: 1.2em;
  margin-right: 8px; /* Add some space between emoji and text */
}

.state-desc {
  flex-grow: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.delete-state-btn {
  background: linear-gradient(
    to bottom,
    #8c2d2d,
    #591d1d
  ); /* Red background for the button */
  color: var(--text-gold);
  border: none;
  border-radius: 50%;
  width: 25px;
  height: 25px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 0.9em; /* Slightly smaller "x" */
  line-height: 0.9em; /* Adjust line height for better "x" centering */
  flex-shrink: 0;
  padding: 0; /* Remove default button padding */
}

.delete-state-btn:hover {
  background-color: #c0392b; /* Darker red on hover */
}
/* .delete-state-btn{
  height: 45px;
  width: 45px;
  margin-left: 10px;
  border: #4e0000;
} */
.dashboard-footer {
  grid-area: footer;
  display: flex;
  justify-content: center;
  /* Centramos el texto del footer */
  align-items: center;
  padding: 5px 20px;
  position: relative;
}

/* --- DISEÑO DE COLUMNAS CON NAVEGACIÓN --- */
.panel-column {
  background: var(--panel-bg);
  border: 1px solid var(--input-border);
  /*border-radius: 8px;*/
  padding: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.panel-container {
  display: flex;
  flex-direction: row;
  height: 100%;
  width: 100%;
}

.left-column {
  grid-area: left;
  min-width: 300.828px;
}

.right-column {
  grid-area: right;
  min-width: 348px;
}

.main-column {
  grid-area: main;
  flex-direction: column;
  min-width: 550.2px;
}

.right-column .panel-container {
  flex-direction: row-reverse;
}

/* Navegación vertical (Izquierda y Derecha) */
.panel-nav {
  background-color: var(--nav-bg);
  flex-shrink: 0;
}

.panel-nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.panel-nav-button {
  width: 100%;
  padding: 12px 10px;
  background: none;
  border: none;
  border-left: 4px solid transparent;
  color: #a0a0a0;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
  margin: 0;
  border-radius: 0;
}

.right-column .panel-nav-button {
  border-left: none;
  border-right: 4px solid transparent;
}

.panel-nav-button:hover {
  background-color: var(--nav-hover-bg);
  color: var(--text-gold);
}

.panel-nav-button.active {
  color: white;
  background-color: var(--header-bg);
  border-left-color: var(--panel-border);
}

.right-column .panel-nav-button.active {
  border-left-color: transparent;
  border-right-color: var(--panel-border);
}

.panel-nav-button .nav-icon {
  width: 24px;
  height: 24px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  flex-shrink: 0;
}

/* Navegación Horizontal (Principal) */
.main-column .panel-nav.horizontal-nav {
  flex-shrink: 0;
  padding: 0;
  border-bottom: 1px solid var(--input-border);
}

.main-column .panel-nav.horizontal-nav ul {
  display: flex;
}

.main-column .panel-nav.horizontal-nav .panel-nav-button {
  flex-direction: row;
  border-left: none;
  border-bottom: 4px solid transparent;
  padding: 12px 20px;
  width: auto;
}

.main-column .panel-nav.horizontal-nav .panel-nav-button.active {
  border-bottom-color: var(--panel-border);
}

/* Contenido de las Vistas */
.panel-content {
  flex-grow: 1;
  overflow-y: auto;
  padding: 0px 15px 15px 15px;
  position: relative;
}
#dmNotes{
  margin-top: 15px;
}
.panel-view {
  display: none;
  flex-direction: column;
}

.panel-view.active {
  display: flex;
}

.view-title {
  margin: 0 0 15px 0;
  padding-bottom: 10px;
  padding-top: 10px;
  font-family: "IM Fell English SC", serif;
  color: var(--text-gold);
  border-bottom: 1px solid var(--input-border);
}

.panel-view > .token-editor-form {
  padding: 0;
  background: none;
  border: none;
}

#main-view-dm-notes {
  height: 100%;
}

#dmNotes {
  flex-grow: 1;
  border: none;
  background-color: var(--content-bg);
  padding: 15px;
  box-sizing: border-box;
  resize: none;
  height: 100%;
}

#dmNotes:focus {
  outline: none;
}

/* --- Visibilidad del editor de Ficha --- */
#tokenEditor {
  display: none;
}

#main-view-selected-token.has-selection #noTokenSelected {
  display: none;
}

#main-view-selected-token.has-selection #tokenEditor {
  display: block;
}

h2 {
  font-family: "IM Fell English SC", serif;
  font-size: 2em;
  text-align: center;
  color: var(--text-gold);
  text-shadow: 1px 1px 3px #000;
}

h4 {
  font-family: "IM Fell English SC", serif;
  color: var(--text-gold);
  border-bottom: 1px dotted var(--input-border);
  padding-bottom: 5px;
  margin-bottom: 10px;
}

h4.top-margin {
  margin-top: 20px;
}

label {
  display: block;
  margin: 10px 0 5px;
  font-size: 0.9em;
}

input[type="text"],
input[type="number"],
textarea {
  width: 100%;
  padding: 8px 10px;
  background-color: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 3px;
  color: var(--text-light);
  font-family: "Cinzel", serif;
  margin-bottom: 5px;
  box-sizing: border-box;
}

textarea {
  resize: vertical;
}

input[type="color"] {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  width: 100%;
  height: 30px;
  background-color: transparent;
  border: 1px solid var(--input-border);
  cursor: pointer;
  padding: 0;
  border-radius: 8px;
}

input[type="color"]::-webkit-color-swatch,
input[type="color"]::-moz-color-swatch {
  border-radius: 3px;
  border: none;
}

button {
  width: 100%;
  padding: 12px;
  margin-top: 15px;
  font-family: "IM Fell English SC", serif;
  font-size: 1.2em;
  color: var(--text-gold);
  border: 1px solid var(--text-gold);
  border-radius: 5px;
  cursor: pointer;
  text-shadow: 1px 1px 2px #000;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2),
    0 2px 3px rgba(0, 0, 0, 0.5);
  transition: all 0.2s;
  background: var(--button-primary-bg);
}

button:hover {
  background: var(--button-primary-hover);
  color: #fff;
}

button.secondary {
  background: var(--header-hover);
  border-color: var(--input-border);
}

button.secondary:hover {
  background: var(--header-bg);
}

.button-group {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}

.button-group button {
  width: 50%;
  margin-top: 0;
}

#toggleVisionBtn {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  color: #5dc66f;
}

#toggleVisionBtn:hover {
  background: var(--button-vision-hover);
  color: #fff;
}

#resetFogBtn {
  flex-grow: 0;
  flex-shrink: 0;
  width: 45px;
  padding: 0;
  font-size: 1.5em;
  background: linear-gradient(to bottom, #8c2d2d, #591d1d);
  border-color: #c65d5d;
  color: #c65d5d;
}

#resetFogBtn:hover {
  background: linear-gradient(to bottom, #a13535, #6b2323);
  color: #fff;
  border-color: #ff8a8a;
}

#openPlayerViewBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.token-editor-form {
  padding: 10px 20px 10px 10px;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 5px;
}

.token-editor-form h4 {
  font-family: "IM Fell English SC", serif;
  color: var(--text-gold);
  border-bottom: 1px dotted var(--input-border);
  padding-bottom: 5px;
  margin: 20px 0 10px;
  font-size: 1.2em;
}

.form-row {
  display: flex;
  gap: 10px;
}

.form-group {
  flex-grow: 1;
  margin-bottom: 10px;
}

.form-group label {
  margin-top: 0;
}

.token-editor-form .button-group {
  margin-top: 20px;
}

.health-controls {
  background-color: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 15px;
  margin-top: 15px;
  text-align: center;
}

.health-controls label {
  font-size: 0.8em;
  color: #a0a0a0;
}

.health-display-container {
  position: relative;
  margin-bottom: 15px;
}

.health-display {
  font-size: 32px;
  font-weight: bold;
  font-family: "Cinzel", serif;
  transition: color 0.3s ease;
}

.health-high {
  color: #5dff8b;
  text-shadow: 0 0 8px rgba(93, 255, 139, 0.7);
}

.health-mid {
  color: #ffee5d;
  text-shadow: 0 0 8px rgba(255, 238, 93, 0.7);
}

.health-low {
  color: #ff5d5d;
  text-shadow: 0 0 8px rgba(255, 93, 93, 0.7);
}

.health-critical {
  animation: blink-red 1s infinite;
}

@keyframes blink-red {
  0%,
  100% {
    color: #ff5d5d;
    text-shadow: 0 0 8px rgba(255, 93, 93, 0.7);
  }

  50% {
    color: #a93232;
    text-shadow: none;
  }
}

.health-modifier-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 8px;
}

.health-modifier-btn {
  width: 80px;
  height: 35px;
  padding: 0;
  font-family: "Cinzel", serif;
  font-size: 1em;
  background: #3a3a3a;
  border-radius: 3px;
  box-shadow: none;
  margin-top: 0;
  top: 0;
}

.health-modifier-btn.negative {
  border: 1px solid #c65d5d;
  color: #c65d5d;
}

.health-modifier-btn.negative:hover {
  background: #4a3f3c;
  color: #ff8a8a;
}

.health-modifier-btn.positive {
  border: 1px solid #5dc66f;
  color: #5dc66f;
}

.health-modifier-btn.positive:hover {
  background: #4a3f3c;
  color: #8affad;
}

.health-modifier-input {
  width: 60px;
  text-align: center;
  font-size: 1.1em;
  padding: 4px;
  margin: 0;
}

.help-text {
  font-size: 0.8em;
  color: #888;
  font-style: italic;
  margin-top: 10px;
}

.damage-float {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 24px;
  font-weight: bold;
  pointer-events: none;
  animation: float-and-fade 1s ease-out forwards;
  z-index: 1001;
}

.damage-float.heal {
  color: #5dff8b;
}

.damage-float.damage {
  color: #ff5d5d;
}

@keyframes float-and-fade {
  to {
    transform: translate(-50%, -150%);
    opacity: 0;
  }
}

#tokenList {
  list-style: none;
  padding: 0;
  margin: 0 -15px -15px;
  /* Ocupa todo el espacio de la vista */
}

#tokenList li {
  background-color: transparent;
  border-bottom: 1px solid var(--input-border);
  padding: 10px 15px;
  cursor: pointer;
  transition: background-color 0.2s;
  display: grid;
  grid-template-columns: 40px 1fr auto;
  grid-template-rows: auto auto;
  gap: 2px 10px;
  align-items: center;
}

#tokenList li:hover {
  background-color: var(--header-hover);
}

#tokenList li.selected-in-list {
  background-color: var(--header-hover);
  border-left: 4px solid var(--text-gold);
  padding-left: 11px;
}

.token-list-preview {
  grid-row: 1 / 3;
  width: 40px;
  height: 40px;
  border-radius: 20%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  color: white;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
  box-sizing: border-box;
}

.token-list-header {
  grid-column: 2 / 3;
  display: flex;
  align-items: center;
  font-size: 1.1em;
  font-weight: bold;
  color: var(--text-light);
}

.token-list-icon {
  display: inline-block;
  width: 1.1em;
  height: 1.1em;
  margin-right: 8px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.icon-player-list {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk280pi-d5a22ac5-2d1e-49cf-8950-ea3da33ffb94.png/v1/fit/w_720,h_867/jugador_icon_by_rafaelalvarez29_dk280pi-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODY3IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI4MHBpLWQ1YTIyYWM1LTJkMWUtNDljZi04OTUwLWVhM2RhMzNmZmI5NC5wbmciLCJ3aWR0aCI6Ijw9NzIwIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.xFjM5mMj-NGZYvdFJzsZItT4jz5ZCERid4abqKijNNk");
  filter: drop-shadow(0 0 5px #fffbc8) drop-shadow(0 0 15px #ffd30e);
  pointer-events: none;
}

.icon-enemy-list {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk280si-23ebfeac-29eb-4e9a-9cf3-af3d666e6828.png/v1/fit/w_679,h_874/enemigo_icon_by_rafaelalvarez29_dk280si-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODc0IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI4MHNpLTIzZWJmZWFjLTI5ZWItNGU5YS05Y2YzLWFmM2Q2NjZlNjgyOC5wbmciLCJ3aWR0aCI6Ijw9Njc5In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.SEXeiU9RgxFAglrgdhWff-z-FCA_TyOJZ9SGd1CVsWU");
  filter: drop-shadow(0 0 12px rgb(255, 75, 255));
  pointer-events: none;
}

.token-list-details {
  grid-column: 2 / 3;
  font-size: 0.8em;
  color: #b0b0b0;
  display: flex;
  gap: 15px;
}

.delete-token-btn {
  grid-column: 3 / 4;
  grid-row: 1 / 3;
  align-self: center;
  background: #8c2d2d;
  color: white;
  border: 1px solid #c65d5d;
  width: 28px;
  height: 28px;
  padding: 0;
  font-size: 1.5em;
  line-height: 28px;
  border-radius: 3px;
  cursor: pointer;
  font-family: monospace;
}

.delete-token-btn:hover {
  background-color: #a13535;
}

.no-tokens-message {
  text-align: center;
  padding: 20px 15px;
  font-size: 0.9em;
  color: #888;
  font-style: italic;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 3px;
}

#mapContainer {
  position: relative;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
  background-color: var(--bg-dark);
  cursor: grab;
}

#mapContentWrapper {
  position: absolute;
  top: 0;
  left: 0;
  transform-origin: 0 0;
  will-change: transform;
  display: none;
  line-height: 0;
}

#mapImage {
  position: relative;
  display: block;
  -webkit-user-drag: none;
  user-select: none;
}

#gridCanvas,
#wallsCanvas,
#visionCanvas,
#tokensLayer,
#aoeCanvas {
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none;
}

#tokensLayer {
  pointer-events: auto;
}

#visionCanvas {
  z-index: 4;
  pointer-events: none;
}

#aoeCanvas {
  z-index: 5;
  opacity: 0.6;
}

.token {
  position: absolute;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  color: white;
  cursor: grab;
  user-select: none;
  box-sizing: border-box;
  transition: opacity 0.3s ease, box-shadow 0.2s ease;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

.token.knocked-out::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%; /* Para que coincida con la forma del token */
  background-color: rgba(
    26,
    26,
    26,
    0.75
  ); /* Negro muy oscuro y semitransparente */
  box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5); /* Sombra interior sutil */
  transition: opacity 0.3s ease;
  opacity: 1; /* Por defecto visible cuando la clase está aplicada */
}

/* que rote un poco para un efecto más dramático */
.token.knocked-out {
  transform: rotate(-15deg);
  transition: transform 0.3s ease;
}
.token:active {
  cursor: grabbing;
  z-index: 100;
}

.token.hidden-enemy {
  opacity: 0;
  pointer-events: none;
}

.token.selected {
  box-shadow: 0 0 15px 5px #fffa86, 0 0 5px 2px #fff;
  z-index: 50;
}

.token.has-image {
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  font-size: 0;
}

.token.token-damaged {
  animation: token-flash-red 0.4s, token-shake 0.4s;
}

.token.token-healed {
  animation: token-pulse-green 0.5s;
}

@keyframes token-shake {
  10%,
  90% {
    transform: translate3d(-1px, 0, 0);
  }

  20%,
  80% {
    transform: translate3d(2px, 0, 0);
  }

  30%,
  50%,
  70% {
    transform: translate3d(-4px, 0, 0);
  }

  40%,
  60% {
    transform: translate3d(4px, 0, 0);
  }
}

@keyframes token-flash-red {
  0%,
  100% {
    box-shadow: inherit;
  }

  50% {
    box-shadow: 0 0 20px 10px rgba(255, 0, 0, 0.8);
  }
}

@keyframes token-pulse-green {
  0%,
  100% {
    box-shadow: inherit;
  }

  50% {
    box-shadow: 0 0 20px 10px rgba(0, 255, 100, 0.7);
  }
}

.panel-logo-container {
  text-align: center;
  padding: 5px 0;
  margin-bottom: 8px;
}

.panel-logo {
  max-width: 150px;
  height: auto;
}

.panel-title-container {
  text-align: center;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--text-gold);
}

.panel-title-container h2 {
  margin: 0;
  padding: 0;
  border: none;
}

.panel-subtitle {
  margin: 5px 0 0 0;
  color: #c0c0c0;
  font-size: 0.9em;
  font-style: italic;
  font-family: "Cinzel", serif;
}

.hidden-file-input {
  width: 0.1px;
  height: 0.1px;
  opacity: 0;
  overflow: hidden;
  position: absolute;
  z-index: -1;
}

.custom-file-upload-btn {
  display: flex;
  /* Cambiado para alinear icono y texto */
  align-items: center;
  justify-content: center;
  gap: 10px;
  width: 100%;
  padding: 12px;
  margin: 0 0 10px 0;
  box-sizing: border-box;
  font-family: "IM Fell English SC", serif;
  font-size: 1.1em;
  color: var(--text-gold);
  border: 1px dashed var(--input-border);
  border-radius: 5px;
  cursor: pointer;
  text-align: center;
  background: var(--header-bg);
  transition: background-color 0.2s, color 0.2s;
}

.custom-file-upload-btn:hover {
  background: var(--header-hover);
  color: #fff;
}

.file-name-display {
  display: block;
  font-size: 0.8em;
  font-style: italic;
  color: #a0a0a0;
  margin-bottom: 15px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.custom-file-upload-btn.small-btn {
  padding: 8px 12px;
  font-size: 0.9em;
  margin-bottom: 5px;
  border-style: solid;
}

.file-upload-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

.file-upload-wrapper .custom-file-upload-btn,
.file-upload-wrapper .file-name-display {
  margin: 0;
}

.file-upload-wrapper .custom-file-upload-btn {
  flex-shrink: 0;
}

.file-upload-wrapper .file-name-display {
  flex-grow: 1;
}

.radio-group,
.checkbox-container {
  display: flex;
  align-items: center;
  position: relative;
}

input[type="checkbox"],
input[type="radio"] {
  opacity: 0;
  position: absolute;
  width: 0;
  height: 0;
}

.radio-group label,
.checkbox-container label {
  position: relative;
  padding-left: 30px;
  cursor: pointer;
  user-select: none;
  font-size: 1em;
}

.radio-group label::before,
.checkbox-container label::before {
  content: "";
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  background-color: var(--input-bg);
  border: 2px solid var(--input-border);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.5);
  transition: all 0.2s ease;
}

.radio-group label::before {
  border-radius: 50%;
}

.checkbox-container label::before {
  border-radius: 3px;
}

input[type="checkbox"]:checked + label::before,
input[type="radio"]:checked + label::before {
  border-color: var(--text-gold);
  background-color: #4a3f3c;
}

.radio-group label::after,
.checkbox-container label::after {
  content: "";
  position: absolute;
  left: 0;
  top: 50%;
  transform: translateY(-50%) scale(0);
  opacity: 0;
  transition: all 0.2s ease-in-out;
}

input[type="radio"] + label::after {
  left: 5px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: var(--text-gold);
}

input[type="checkbox"] + label::after {
  left: 7px;
  top: 40%;
  width: 6px;
  height: 12px;
  border: solid var(--text-gold);
  border-width: 0 3px 3px 0;
  transform: translateY(-50%) rotate(45deg) scale(0);
}

input[type="checkbox"]:checked + label::after,
input[type="radio"]:checked + label::after {
  opacity: 1;
  transform: translateY(-50%) scale(1);
}

input[type="checkbox"]:checked + label::after {
  transform: translateY(-50%) rotate(45deg) scale(1);
}

input[type="checkbox"]:focus-visible + label::before,
input[type="radio"]:focus-visible + label::before {
  outline: 2px solid var(--text-gold);
  outline-offset: 2px;
}

::-webkit-scrollbar {
  width: 10px;
}
#playerTurnTracker::-webkit-scrollbar {
  width: 17px; /* Ejemplo: más delgado */
}

#playerTurnTracker::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3); /* Ejemplo: más oscuro y transparente */
  border-radius: 4px;
}

#playerTurnTracker::-webkit-scrollbar-thumb {
  background: var(--text-gold); /* Ejemplo: color dorado */
  border-radius: 4px;
  border: 2px solid transparent; /* Crea un pequeño padding */
  background-clip: content-box;
}

#playerTurnTracker::-webkit-scrollbar-thumb:hover {
  background: #fff; /* Ejemplo: blanco al pasar el ratón */
}
::-webkit-scrollbar-track {
  background: var(--header-bg);
}

::-webkit-scrollbar-thumb {
  background: #966331;
  /**border-radius: 5px;*/
}

::-webkit-scrollbar-thumb:hover {
  background: #c78038;
}

body.wall-drawing-mode #mapContainer {
  cursor: crosshair;
}

#toggleWallModeBtn.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  color: #fff;
  box-shadow: 0 0 10px #5dc66f;
}

#alignGridModeBtn.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  color: #fff;
  box-shadow: 0 0 10px #5dc66f;
}

body.grid-align-mode #mapContainer {
  cursor: crosshair;
}

input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  cursor: pointer;
  outline: none;
  overflow: hidden;
  border-radius: 16px;
}

input[type="range"]::-webkit-slider-runnable-track {
  height: 15px;
  background: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 16px;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  height: 15px;
  width: 15px;
  background-color: var(--bg-dark);
  border-radius: 50%;
  border: 2px solid var(--text-gold);
  box-shadow: -407px 0 0 400px var(--text-gold);
}

.loading-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: #a0a0a0;
  text-align: center;
  font-family: "Cinzel", serif;
  margin: 30px;
}

.loading-state p {
  font-size: 1.2em;
  max-width: 400px;
  line-height: 1.5;
}

.loading-state img {
  width: 75%;
  max-width: 800px;
}

.loading-state .icon {
  width: 80px;
  height: 80px;
  margin-bottom: 16px;
  opacity: 0.7;
  animation: bounce 2s infinite ease-in-out;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.icon-dice-large {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk284pr-9dfc6256-e224-42ee-8ed1-3919850a1ecd.png/v1/fill/w_894,h_894/carganoruna_icon_by_rafaelalvarez29_dk284pr-pre.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MTAyNCIsInBhdGgiOiJcL2ZcLzQ2NWU0NTMyLTU0MzAtNGJlNy1iNDljLWFjZjgxMDg3ZDhiZFwvZGsyODRwci05ZGZjNjI1Ni1lMjI0LTQyZWUtOGVkMS0zOTE5ODUwYTFlY2QucG5nIiwid2lkdGgiOiI8PTEwMjQifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.uOKJoXBapkzwmJG35gjiwFkz1UgiuTiphqmSdMVOfmE");
}

@keyframes bounce {
  0%,
  20%,
  50%,
  80%,
  100% {
    transform: translateY(0);
  }

  40% {
    transform: translateY(-20px);
  }

  60% {
    transform: translateY(-10px);
  }
}

.loading-state h1 {
  font-family: "IM Fell English SC", serif;
  font-size: 2.5em;
  color: var(--text-gold);
  margin: 0 0 10px 0;
  text-shadow: 1px 1px 3px #000;
}

.loading-state h2 {
  font-family: "Cinzel", serif;
  font-size: 1.2em;
  font-weight: normal;
  color: #c0c0c0;
  margin: 0 0 20px 0;
  padding: 0;
  border: none;
  text-shadow: none;
}

#doorList {
  list-style: none;
  padding: 0;
  margin: 0;
}

#doorList li {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px;
  border-bottom: 1px solid var(--input-border);
  background-color: rgba(0, 0, 0, 0.1);
  transition: background-color 0.2s;
}

#doorList li:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.door-name {
  font-family: "Cinzel", serif;
  font-size: 1.1em;
}

.door-actions {
  display: flex;
  gap: 8px;
}

.toggle-door-btn {
  padding: 5px 10px;
  font-size: 0.9em;
  font-family: "Cinzel", serif;
  min-width: 80px;
  margin: 0;
  border-radius: 3px;
  background: var(--header-hover);
  border: 1px solid var(--input-border);
  color: var(--text-light);
}

.toggle-door-btn:hover {
  background: var(--header-bg);
  color: white;
}

.toggle-door-btn.open {
  border-color: #5dc66f;
  color: #5dc66f;
}

.delete-door-btn {
  background: none;
  border: 1px solid #c65d5d;
  color: #c65d5d;
  width: 28px;
  height: 28px;
  padding: 0;
  margin: 0;
  font-size: 1.2em;
  line-height: 26px;
  border-radius: 3px;
}

.delete-door-btn:hover {
  background: #a13535;
  color: white;
}

#noDoorsMessage {
  text-align: center;
  padding: 15px;
}

.door-name-edit {
  background-color: var(--input-bg);
  border: 1px solid var(--text-gold);
  color: var(--text-light);
  font-family: "Cinzel", serif;
  font-size: 1.1em;
  padding: 4px 6px;
  border-radius: 3px;
  width: 50%;
}

#editTokenImagePreviewContainer {
  position: relative;
  width: 100px;
  height: 100px;
  margin: 0 auto 15px;
}

#editTokenImagePreview,
.token-preview-letter {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 3px solid var(--text-gold);
}

#editTokenImagePreview {
  object-fit: cover;
}

.token-preview-letter {
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: "IM Fell English SC", serif;
  font-size: 3.5em;
  color: white;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
  box-sizing: border-box;
}

.change-image-btn {
  position: absolute;
  bottom: 0;
  right: 0;
  width: 30px;
  height: 30px;
  background: var(--header-bg);
  color: var(--text-gold);
  border-radius: 50%;
  border: 1px solid var(--panel-border);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 1.2em;
  transition: background-color 0.2s;
}

.change-image-btn:hover {
  background: var(--header-hover);
}

.remove-image-btn {
  position: absolute;
  top: 0;
  right: 0;
  width: 24px;
  height: 24px;
  background: #8c2d2d;
  color: white;
  border: 1px solid #c65d5d;
  border-radius: 50%;
  padding: 0;
  margin: 0;
  font-size: 1.1em;
  line-height: 22px;
  cursor: pointer;
}

.remove-image-btn:hover {
  background: #a13535;
}

.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(5px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s ease-out;
}

.modal-overlay.open {
  display: flex;
  opacity: 1;
}

.modal-content {
  background: var(--panel-bg);
  padding: 25px;
  border-radius: 8px;
  border: 1px solid var(--panel-border);
  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
  width: 90%;
  max-width: 500px;
  position: relative;
  transform: scale(0.95);
  transition: transform 0.3s ease;
}

.modal-overlay.open .modal-content {
  transform: scale(1);
}

.modal-content h3 {
  font-family: "IM Fell English SC", serif;
  font-size: 1.8em;
  text-align: center;
  color: var(--text-gold);
  margin-top: 0;
  margin-bottom: 20px;
}

.saved-scenes-modal {
  background: var(--panel-bg);
  border: 3px solid var(--panel-border);
  border-radius: 12px;
  width: 90%;
  max-width: 1100px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
}

.modal-header {
  padding: 20px 25px;
  border-bottom: 2px solid var(--panel-border);
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(135deg, var(--header-bg), var(--panel-bg));
  flex-shrink: 0;
}

.modal-title {
  font-family: "IM Fell English SC", serif;
  font-size: 2.2em;
  color: var(--text-gold);
  margin: 0;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.modal-close-btn {
  background: #8c2d2d;
  color: white;
  border: 2px solid #c65d5d;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  font-size: 1.8em;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: 0;
  flex-shrink: 0;
}

.modal-close-btn:hover {
  background: #a13535;
  transform: scale(1.1);
}

.modal-content-body {
  padding: 25px;
  overflow-y: auto;
  flex-grow: 1;
}

.saved-scenes-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 25px;
}

.scene-card {
  background: var(--content-bg);
  border: 2px solid var(--input-border);
  border-radius: 10px;
  overflow: hidden;
  transition: all 0.3s ease;
  cursor: pointer;
  position: relative;
  display: flex;
  flex-direction: column;
}

.scene-card:hover {
  border-color: var(--text-gold);
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(230, 194, 83, 0.2);
}

.scene-card-image-container {
  position: relative;
  width: 100%;
  height: 180px;
  overflow: hidden;
  background: #000;
}

.scene-card-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.scene-card:hover .scene-card-image {
  transform: scale(1.05);
}

.scene-card-info-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
  padding: 40px 15px 15px 15px;
  color: white;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
}

.scene-card-name {
  font-family: "IM Fell English SC", serif;
  font-size: 1.4em;
  color: var(--text-gold);
  margin: 0 0 5px 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.scene-card-date {
  font-family: "Cinzel", serif;
  font-size: 0.8em;
  color: #c0c0c0;
  margin: 0;
}

.scene-card-body {
  padding: 15px;
  border-top: 1px solid var(--input-border);
}

.scene-card-stats {
  display: flex;
  justify-content: space-around;
  font-size: 0.9em;
  color: #a0a0a0;
}

.scene-card-stat-item {
  display: flex;
  align-items: center;
  gap: 8px;
}

.scene-card-stat-icon {
  font-size: 1.2em;
  display: inline-block;
  width: 1em;
  height: 1em;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.icon-stat-token {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk2826w-6b17b7c5-0f58-4c59-9457-29763234d533.png/v1/fit/w_574,h_759/ficha_icon_by_rafaelalvarez29_dk2826w-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NzU5IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI4MjZ3LTZiMTdiN2M1LTBmNTgtNGM1OS05NDU3LTI5NzYzMjM0ZDUzMy5wbmciLCJ3aWR0aCI6Ijw9NTc0In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.ecJ1Y7MbiTskxHcKPmmKWW4a8O6YA67wjxwMoIPZIjU");
}

.icon-stat-wall {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk27xrv-d8c11b91-d059-42e1-922c-39233f7d587f.png/v1/fill/w_884,h_837/muro_icon_by_rafaelalvarez29_dk27xrv-fullview.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODM3IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI3eHJ2LWQ4YzExYjkxLWQwNTktNDJlMS05MjJjLTM5MjMzZjdkNTg3Zi5wbmciLCJ3aWR0aCI6Ijw9ODg0In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.Gsorh3ss3jCQIFRYym-JjKfx7KIgnU6l3DuI3KM02bw");
}

.icon-stat-door {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk27xzc-36669da6-1875-409f-83e5-61a04b750924.png/v1/fit/w_602,h_848/puerta_icon_by_rafaelalvarez29_dk27xzc-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODQ4IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI3eHpjLTM2NjY5ZGE2LTE4NzUtNDA5Zi04M2U1LTYxYTA0Yjc1MDkyNC5wbmciLCJ3aWR0aCI6Ijw9NjAyIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.Y989bL2cMG4fX4jmwQvfM2hTQZmPqv1oTh9DEXIIp44");
}

.delete-scene-btn {
  position: absolute;
  top: 10px;
  right: 10px;
  background: rgba(140, 45, 45, 0.85);
  color: white;
  border: 1px solid #c65d5d;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  font-size: 1.3em;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transform: scale(0.8);
  transition: all 0.2s ease-out;
  backdrop-filter: blur(3px);
  z-index: 5;
}

.scene-card:hover .delete-scene-btn {
  opacity: 1;
  transform: scale(1);
}

.delete-scene-btn:hover {
  background: rgba(161, 53, 53, 1);
  transform: scale(1.1) !important;
}

#no-scenes-message {
  grid-column: 1 / -1;
  text-align: center;
  padding: 60px 20px;
  color: #888;
}

.icon-map-large {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk2807e-bf125877-efc8-4136-97d7-e6b8bd53da39.png/v1/fit/w_674,h_707/mapa_icon_by_rafaelalvarez29_dk2807e-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NzA3IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI4MDdlLWJmMTI1ODc3LWVmYzgtNDEzNi05N2Q3LWU2YjhiZDUzZGEzOS5wbmciLCJ3aWR0aCI6Ijw9Njc0In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.KFdtHEY3m67t_O4ES74Pr_pH9yK6Oa3n0Yc6MJR3tAA");
}

.icon-map {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk2807e-bf125877-efc8-4136-97d7-e6b8bd53da39.png/v1/fit/w_674,h_707/mapa_icon_by_rafaelalvarez29_dk2807e-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9NzA3IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI4MDdlLWJmMTI1ODc3LWVmYzgtNDEzNi05N2Q3LWU2YjhiZDUzZGEzOS5wbmciLCJ3aWR0aCI6Ijw9Njc0In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.KFdtHEY3m67t_O4ES74Pr_pH9yK6Oa3n0Yc6MJR3tAA");
}

#no-scenes-message .icon {
  font-size: 4em;
  color: #666;
  margin-bottom: 20px;
  opacity: 0.5;
  display: inline-block;
  width: 1em;
  height: 1em;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

#no-scenes-message h3 {
  font-family: "IM Fell English SC", serif;
  font-size: 1.8em;
  color: #999;
  margin: 0 0 15px 0;
}

#no-scenes-message p {
  font-family: "Cinzel", serif;
  font-size: 1.1em;
  line-height: 1.5;
  max-width: 400px;
  margin: 0 auto;
}

#playerTurnTracker {
  position: fixed;
  top: 20px;
  right: 20px;
  width: 300px;
  max-height: calc(100vh - 40px);
  z-index: 10;
  overflow-y: auto;
  overflow-x: hidden;
  color: var(--text-light);
}

.player-token-card {
  position: relative;
  display: flex;
  align-items: center;
  padding: 12px;
  gap: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
  background-color: #1f1614d9;
  background: linear-gradient(
    to right,
    rgba(0, 0, 0, 0.8),
    rgba(0, 0, 0, 0.6),
    rgba(0, 0, 0, 0.4),
    rgba(0, 0, 0, 0.2)
  );
  clip-path: polygon(5% 0%, 100% 0%, 100% 100%, 0% 100%);
  margin: 10px;
}

.player-token-card.selected-in-tracker {
  box-shadow: 0 0 12px 2px var(--text-gold);
  background: linear-gradient(
    to right,
    rgba(0, 0, 0, 1),
    rgba(0, 0, 0, 0.8),
    rgba(0, 0, 0, 0.6),
    rgba(0, 0, 0, 0.4)
  );
  border: 1px solid var(--text-gold);
  border-left: none;
  transform: scale(1.03);
}

.player-token-preview {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  flex-shrink: 0;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.5em;
  color: white;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
  border: 2px solid #555;
}

.player-token-info {
  flex-grow: 1;
  min-width: 0;
}

.player-token-name {
  font-family: "IM Fell English SC", serif;
  font-size: 1.2em;
  font-weight: bold;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.player-token-initiative {
  font-size: 0.8em;
  color: #b0b0b0;
  margin-bottom: 8px;
}

.health-bar-container {
  width: 100%;
  height: 12px;
  background-color: #1a1a1a;
  border-radius: 6px;
  overflow: hidden;
  border: 1px solid #4a3f3c;
}

.health-bar-fill {
  height: 100%;
  border-radius: 6px;
  transition: width 0.3s ease, background-color 0.3s ease;
}

.health-bar-fill.health-high,
.details-health-bar-fill.health-high {
  background-color: #5dff8b;
}

.health-bar-fill.health-mid,
.details-health-bar-fill.health-mid {
  background-color: #ffee5d;
}

.health-bar-fill.health-low,
.details-health-bar-fill.health-low {
  background-color: #ff5d5d;
}

.health-bar-fill.health-critical,
.details-health-bar-fill.health-critical {
  background-color: #a93232;
}

.player-token-health-text {
  font-size: 0.8em;
  color: #b0b0b0;
  margin-top: 5px;
  padding-left: 2px;
}

.player-token-states {
  display: flex;
  gap: 5px;
  margin-top: 8px;
  font-size: 1.2em;
}

.player-token-states span {
  cursor: help;
}

.player-token-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: inherit;
  clip-path: inherit;
  opacity: 0;
  pointer-events: none;
  background-color: transparent;
  transition: background-color 0.2s;
  z-index: -1;
}

.player-token-card.card-damaged {
  animation: token-shake 0.4s ease-out;
}

.player-token-card.card-damaged::before {
  background-color: rgba(180, 50, 50, 0.7);
  animation: flash-overlay 0.4s ease-out;
}

.player-token-card.card-healed {
  animation: card-pulse-scale 0.5s ease-out;
}

.player-token-card.card-healed::before {
  background-color: rgba(50, 180, 80, 0.6);
  animation: flash-overlay 0.5s ease-out;
}

@keyframes card-pulse-scale {
  0%,
  100% {
    transform: scale(1);
  }

  50% {
    transform: scale(1.02);
  }
}

@keyframes flash-overlay {
  0%,
  100% {
    opacity: 0;
  }

  50% {
    opacity: 1;
  }
}

.radio-tile-group {
  display: flex;
  justify-content: space-around;
  gap: 1rem;
  margin-top: 10px;
}

.radio-tile-group .input-container {
  position: relative;
  height: 90px;
  flex: 1;
  max-width: 180px;
}

.radio-tile-group .input-container .radio-button {
  opacity: 0;
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin: 0;
  cursor: pointer;
}

.radio-tile-group .input-container .radio-tile {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  border: 2px solid var(--input-border);
  border-radius: 8px;
  background: var(--content-bg);
  transition: all 0.2s ease-in-out;
  box-sizing: border-box;
}

.radio-tile-group .input-container .radio-tile-icon {
  font-size: 2.5em;
  line-height: 1;
  margin-bottom: 8px;
  display: inline-block;
  width: 1em;
  height: 1em;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.icon-wall-draw {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk27xrv-d8c11b91-d059-42e1-922c-39233f7d587f.png/v1/fill/w_884,h_837/muro_icon_by_rafaelalvarez29_dk27xrv-fullview.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODM3IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI3eHJ2LWQ4YzExYjkxLWQwNTktNDJlMS05MjJjLTM5MjMzZjdkNTg3Zi5wbmciLCJ3aWR0aCI6Ijw9ODg0In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.Gsorh3ss3jCQIFRYym-JjKfx7KIgnU6l3DuI3KM02bw");
}

.icon-door-draw {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk27xzc-36669da6-1875-409f-83e5-61a04b750924.png/v1/fit/w_602,h_848/puerta_icon_by_rafaelalvarez29_dk27xzc-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODQ4IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI3eHpjLTM2NjY5ZGE2LTE4NzUtNDA5Zi04M2U1LTYxYTA0Yjc1MDkyNC5wbmciLCJ3aWR0aCI6Ijw9NjAyIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.Y989bL2cMG4fX4jmwQvfM2hTQZmPqv1oTh9DEXIIp44");
}

.icon-player-type {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk280pi-d5a22ac5-2d1e-49cf-8950-ea3da33ffb94.png/v1/fit/w_720,h_867/jugador_icon_by_rafaelalvarez29_dk280pi-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODY3IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI4MHBpLWQ1YTIyYWM1LTJkMWUtNDljZi04OTUwLWVhM2RhMzNmZmI5NC5wbmciLCJ3aWR0aCI6Ijw9NzIwIn1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.xFjM5mMj-NGZYvdFJzsZItT4jz5ZCERid4abqKijNNk");
  filter: drop-shadow(0 0 5px #fffbc8) drop-shadow(0 0 15px #ffd30e);
  pointer-events: none;
}

.icon-enemy-type {
  background-image: url("https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/465e4532-5430-4be7-b49c-acf81087d8bd/dk280si-23ebfeac-29eb-4e9a-9cf3-af3d666e6828.png/v1/fit/w_679,h_874/enemigo_icon_by_rafaelalvarez29_dk280si-375w-2x.png?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9ODc0IiwicGF0aCI6IlwvZlwvNDY1ZTQ1MzItNTQzMC00YmU3LWI0OWMtYWNmODEwODdkOGJkXC9kazI4MHNpLTIzZWJmZWFjLTI5ZWItNGU5YS05Y2YzLWFmM2Q2NjZlNjgyOC5wbmciLCJ3aWR0aCI6Ijw9Njc5In1dXSwiYXVkIjpbInVybjpzZXJ2aWNlOmltYWdlLm9wZXJhdGlvbnMiXX0.SEXeiU9RgxFAglrgdhWff-z-FCA_TyOJZ9SGd1CVsWU");
  filter: drop-shadow(0 0 12px rgb(255, 75, 255));
  pointer-events: none;
}

.radio-tile-group .input-container .radio-tile-label {
  text-align: center;
  font-size: 0.9em;
  font-family: "IM Fell English SC", serif;
  font-weight: 600;
  color: var(--text-light);
  letter-spacing: 1px;
  pointer-events: none;
}

.radio-tile-group .input-container .radio-button:checked + .radio-tile {
  background-color: var(--header-hover);
  border: 2px solid var(--text-gold);
  color: var(--text-gold);
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(230, 194, 83, 0.3);
}

.radio-tile-group
  .input-container
  .radio-button:checked
  + .radio-tile
  .radio-tile-label {
  color: var(--text-gold);
}

.sound-board-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 10px;
}

.sound-btn {
  margin-top: 0;
  padding: 10px 5px;
  font-size: 0.9em;
  background: var(--header-bg);
  border-color: var(--input-border);
  transition: all 0.2s ease;
  min-height: 60px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 5px;
}

.sound-btn:hover {
  background: var(--header-hover);
  border-color: var(--text-gold);
}

.sound-btn.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  color: #fff;
  box-shadow: 0 0 8px #5dc66f;
}

#aoeShapeSelector {
  grid-template-columns: repeat(5, 1fr);
  gap: 5px;
}

#aoeShapeSelector button {
  padding: 8px 5px;
  font-size: 0.9em;
  margin-top: 0;
}

#aoeShapeSelector button.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  color: #fff;
  box-shadow: 0 0 10px #5dc66f;
}

#aoeParamsContainer .form-group {
  margin-bottom: 0;
}

.fog-brush-controls {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-top: 10px;
}

.checkbox-tile-group {
  display: flex;
  gap: 10px;
}

.checkbox-tile-group .input-container {
  position: relative;
  height: 90px;
  width: 90px;
}

.checkbox-tile-group .checkbox-button {
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  cursor: pointer;
  margin: 0;
}

.checkbox-tile-group .checkbox-tile {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  border: 2px solid var(--input-border);
  border-radius: 8px;
  background: var(--content-bg);
  transition: all 0.2s ease-in-out;
  box-sizing: border-box;
  padding: 5px;
}

.checkbox-tile-group .checkbox-tile-icon {
  font-size: 2em;
  line-height: 1;
  margin-bottom: 5px;
  display: inline-block;
  width: 2em;
  height: 2em;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
}

.icon-reveal-fog {
  background-image: url("assets/images/icons/pincel-no-niebla.png");
  filter: drop-shadow(0 0 12px rgb(255, 255, 255));
  pointer-events: none;
}

.icon-hide-fog {
  background-image: url("assets/images/icons/pincel-niebla.png");
  filter: drop-shadow(0 0 12px rgb(255, 75, 255));
  pointer-events: none;
}

.checkbox-tile-group .checkbox-tile-label {
  text-align: center;
  font-size: 1em;
  font-family: "IM Fell English SC", serif;
  color: var(--text-light);
  pointer-events: none;
}

.checkbox-tile-group .checkbox-button:checked + .checkbox-tile {
  background-color: var(--header-hover);
  border-color: var(--text-gold);
}

.checkbox-tile-group
  .checkbox-button:checked
  + .checkbox-tile
  .checkbox-tile-label {
  color: var(--text-gold);
}

.brush-size-container {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
}

#mapContainer.brush-mode-active {
  cursor: url("assets/images/icons/cursor-pincel.cur") 0 43, auto;
}

#mapContainer.brush-mode-active:active {
  cursor: url("assets/images/icons/cursor-pincel-active.cur") 0 43, auto;
}

.button-group button {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.button-group button.secondary {
  gap: 8px;
}

.btn-icon {
  display: inline-block;
  width: 1.2em;
  height: 1.2em;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  flex-shrink: 0;
}

.icon-undo {
  background-image: url("assets/images/icons/deshacer_icon.png");
}

.icon-clear-all {
  background-image: url("assets/images/icons/limpiartodo_icon.png");
}

.icon-save-scene {
  background-image: url("assets/images/icons/guardarescena_icon.png");
}

.icon-load-scene {
  background-image: url("assets/images/icons/cargarescena_icon.png");
}

.icon-player-view {
  background-image: url("assets/images/icons/jugadores_icon.png");
}

.icon-notes {
  background-image: url("assets/images/icons/notas-icon.png");
}

.icon-tokens {
  background-image: url("assets/images/icons/fichas_icon.png");
}

.icon-add-token {
  background-image: url("assets/images/icons/mas_icon.png");
}

.icon-selected-token {
  background-image: url("assets/images/icons/seleccionado_icon.png");
}

.icon-tools {
  background-image: url("assets/images/icons/herramientas_icon.png");
}

.icon-walls {
  background-image: url("assets/images/icons/muro_icon.png");
}

.icon-doors {
  background-image: url("assets/images/icons/puerta_icon.png");
}

.icon-ambiance {
  background-image: url("assets/images/icons/ambiente_icon.png");
}
.icon-boock {
  background-image: url("assets/images/icons/icon-boock.png");
}
.char-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(50px, 1fr));
  gap: 5px;
  margin-bottom: 15px;
}

.char-stat-card {
  background-color: var(--header-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 8px 5px;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 6px;
}

.char-stat-card label {
  font-family: "IM Fell English SC", serif;
  font-size: 0.9em;
  color: var(--text-gold);
  margin: 0;
  font-weight: bold;
}

.char-mod {
  font-size: 1.6em;
  font-weight: bold;
  color: var(--text-light);
  line-height: 1;
}

.char-score-capsule {
  background-color: rgba(255, 255, 255, 0.1);
  border-radius: 20px;
  width: 100%;
}

.char-score-input {
  width: 100%;
  padding: 2px;
  margin: 0;
  text-align: center;
  background: transparent;
  border: none;
  color: var(--text-light);
  font-family: "Cinzel", serif;
  font-size: 1em;
  -moz-appearance: textfield;
}

.char-score-input::-webkit-outer-spin-button,
.char-score-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.char-score-input:focus {
  outline: none;
  background-color: rgba(0, 0, 0, 0.3);
}

.combat-stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
  gap: 5px;
  margin-bottom: 15px;
}

.combat-stat-card {
  background-color: var(--header-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  padding: 8px 5px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  text-align: center;
}

.combat-value-input {
  font-size: 2em;
  font-weight: bold;
  color: var(--text-light);
  line-height: 1;
  width: 100%;
  text-align: center;
  background: transparent;
  border: none;
  padding: 5px 0;
  margin: 0;
  -moz-appearance: textfield;
}

.combat-value-input::-webkit-outer-spin-button,
.combat-value-input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.combat-value-input:focus {
  outline: none;
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 5px;
}

.combat-label-top,
.combat-label-bottom {
  font-size: 0.7em;
  text-transform: uppercase;
  color: #a0a0a0;
  line-height: 1;
  font-family: "Cinzel", serif;
}

.combat-stat-card label.combat-label-top,
.combat-stat-card label.combat-label-bottom {
  margin: 0;
}

.saving-throws-list {
  display: flex;
  flex-direction: column;
  gap: 4px;
  background-color: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--input-border);
  padding: 10px;
  border-radius: 5px;
}

.save-throw-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 5px;
  border-radius: 3px;
}

.save-throw-row .save-name {
  white-space: nowrap; /* Evita que el nombre se parta en varias líneas */
  overflow: hidden; /* Oculta el texto que se desborda */
  text-overflow: ellipsis; /* Añade "..." si el texto se corta (opcional, pero elegante) */
  flex-shrink: 1; /* Permite que el elemento se encoja si es necesario */
}

.save-throw-row:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

.save-throw-row .checkbox-container {
  padding-left: 20px;
  flex-shrink: 0;
}

.save-throw-row .checkbox-container label::before {
  width: 16px;
  height: 16px;
}

.save-throw-row .checkbox-container label::after {
  width: 4px;
  height: 9px;
  left: 6px;
  top: 45%;
}

input.save-prof-check:checked + label::before {
  background-color: var(--text-gold);
  border-color: var(--text-gold);
}

input.save-prof-check:checked + label::after {
  border-color: var(--panel-bg);
}

.save-name {
  flex-grow: 1;
  color: var(--text-light);
  font-size: 0.9em;
}

.save-total {
  font-size: 1.1em;
  font-weight: bold;
  color: var(--text-light);
  background-color: var(--header-bg);
  padding: 2px 10px;
  border-radius: 10px;
  min-width: 40px;
  text-align: center;
  border: 1px solid var(--input-border);
}

#tokenAbilitiesEditor,
#tokenInventoryEditor {
  margin-top: 20px;
}

.info-card-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-bottom: 10px;
  max-height: auto;
  overflow-y: auto;
  padding-right: 5px;
}

.info-card {
  position: relative;
  background-color: rgba(0, 0, 0, 0.2);
  border: 1px solid var(--text-gold);
  border-left: 3px solid var(--text-gold);
  border-radius: 4px;
  padding: 10px 15px;
  padding-right: 40px;
}

.info-card-title {
  font-family: "IM Fell English SC", serif;
  font-size: 1.1em;
  font-weight: bold;
  color: var(--text-light);
  margin: 0 0 5px 0;
}

.info-card-desc {
  font-size: 0.9em;
  color: #c0c0c0;
  white-space: pre-wrap;
  line-height: 1.4;
}

.delete-info-btn {
  position: absolute;
  top: 8px;
  right: 8px;
  transform: none;
  background: none;
  border: 1px solid #c65d5d;
  color: #c65d5d;
  width: 26px;
  height: 26px;
  padding: 0;
  margin: 0;
  font-size: 1.1em;
  line-height: 24px;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
}

.delete-info-btn:hover {
  background: #a13535;
  color: white;
}

#featureInventoryModal textarea {
  min-height: 80px;
}

.colorh,
#tokenColor,
#tokenBorderColor,
#aoeColor,
#editTokenColor,
#editTokenBorderColor {
  border: none !important;
}

.nobackgrund {
  border-radius: 50% !important;
  border: none !important;
  background: none !important;
}

.char-score-input.nobackgrund,
.combat-value-input.nobackgrund {
  border: none !important;
}

.token-header-display {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 15px;
  background-color: var(--content-bg);
  border-radius: 8px;
  margin-bottom: 20px;
  border: none;
}

#editTokenImagePreviewContainer {
  margin: 0;
  flex-shrink: 0;
}

.token-header-info {
  flex-grow: 1;
  cursor: pointer;
}

.token-name-view {
  font-family: "IM Fell English SC", serif;
  font-size: 2.2em;
  color: var(--text-gold);
  margin: 0 0 5px 0;
  line-height: 1.1;
  text-shadow: 1px 1px 3px #000;
}

.token-class-level-view {
  font-size: 1em;
  color: var(--text-light);
  margin: 0 0 3px 0;
  font-family: "Cinzel", serif;
}

.token-race-view {
  font-size: 0.9em;
  font-style: italic;
  color: #b0b0b0;
  margin: 0;
}

#tokenInfoEdit input {
  width: calc(100% - 20px);
  margin-bottom: 8px;
}

#tokenInfoEdit .token-name-edit {
  font-family: "IM Fell English SC", serif;
  font-size: 2.2em;
  color: var(--text-gold);
  background-color: rgba(0, 0, 0, 0.3);
  border-color: var(--text-gold);
}

#saveHeaderBtn {
  width: auto;
  padding: 6px 12px;
  font-size: 0.9em;
  margin-top: 5px;
  float: right;
}

.saved-characters-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  gap: 10px;
}

.saved-char-card {
  background-color: var(--content-bg);
  border: 1px solid var(--input-border);
  border-radius: 8px;
  overflow: hidden;
  cursor: pointer;
  transition: all 0.2s ease;
  position: relative;
}

.saved-char-card:hover {
  border-color: var(--text-gold);
  transform: translateY(-3px);
  box-shadow: 0 4px 10px rgba(230, 194, 83, 0.15);
}

.saved-char-preview {
  width: 100%;
  padding-top: 100%;
  position: relative;
  background-color: #000;
}

.saved-char-preview .preview-content {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: "IM Fell English SC", serif;
  font-size: 3em;
  color: white;
  text-shadow: 1px 1px 2px #000;
}

.saved-char-info {
  padding: 8px;
  text-align: center;
}

.saved-char-name {
  font-weight: bold;
  font-size: 0.9em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin: 0 0 3px 0;
  color: var(--text-light);
}

.saved-char-level {
  font-size: 0.8em;
  color: #a0a0a0;
  margin: 0;
}

.delete-saved-char-btn {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 22px;
  height: 22px;
  padding: 0;
  margin: 0;
  background: rgba(140, 45, 45, 0.8);
  border: 1px solid #c65d5d;
  color: white;
  border-radius: 50%;
  font-size: 1em;
  line-height: 20px;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.2s;
  z-index: 2;
}

.saved-char-card:hover .delete-saved-char-btn {
  opacity: 1;
}

.delete-saved-char-btn:hover {
  background: #a13535;
}

.icon-notes {
  background-image: url("assets/images/icons/notas-icon.png");
}

#dmNotes:focus {
  outline: none;
  border-color: var(--text-gold);
  box-shadow: 0 0 8px rgba(230, 194, 83, 0.3);
}

.sound-categories-container {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.sound-category-header {
  font-family: "IM Fell English SC", serif;
  font-size: 1.1em;
  color: var(--text-gold);
  padding-bottom: 8px;
  border-bottom: 1px solid var(--input-border);
  margin: 15px 0 10px 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

.sound-category-header:first-of-type {
  margin-top: 0;
}

.sound-category-header::before {
  content: "🎵";
  font-family: "Arial", sans-serif;
  font-size: 1.2em;
  color: var(--text-gold);
  opacity: 0.8;
}

/* --- ESTILOS PARA LA PANTALLA DE BIENVENIDA --- */

.welcome-screen {
  /* Fondo con imagen */
  background-size: cover;
  background-position: center center;

  /* Centrado del contenido */
  align-items: center;
  justify-content: center;
  text-align: center;

  /* Superposición oscura para legibilidad del texto */
  position: relative;
  color: white;
}

.welcome-screen::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1;
}

.welcome-content {
  position: relative;
  /* Para que esté por encima de la superposición */
  z-index: 2;
  padding: 20px;
}

.welcome-title {
  font-family: "IM Fell English SC", serif;
  font-size: 3em;
  color: var(--text-gold);
  margin: 0 0 15px 0;
  text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.8);
}

.welcome-text {
  font-family: "Cinzel", serif;
  font-size: 1.2em;
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.6;
  text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
}

.title-with-button {
  display: flex;
  align-items: center;
  /* Centra verticalmente todos los elementos */
  gap: 15px;
  /* Espacio entre título, input y botón */
  margin-bottom: 15px;
}

.title-with-button h3,
.title-with-button span {
  flex-grow: 1; /* Hacemos que el título ocupe el espacio disponible */
  flex-shrink: 0; /* Evitamos que se encoja */
  margin: 0; /* Quitamos márgenes por si acaso */
}

/* Nuevo estilo para el input de búsqueda */
.search-in-list-input {
  flex-grow: 1;
  /* El input ocupa todo el espacio sobrante */
  margin: 0;
  /* Reseteamos el margen del input genérico */
  padding: 6px 10px;
  font-size: 0.9em;
  background-color: var(--input-bg);
  border: 1px solid var(--input-border);
  border-radius: 15px;
  /* Hacemos el input redondeado */
}

.search-in-list-input:focus {
  outline: none;
  border-color: var(--text-gold);
  box-shadow: 0 0 5px rgba(230, 194, 83, 0.2);
}

.add-item-btn {
  /* El botón no debe crecer ni encogerse */
  flex-shrink: 0;

  /* El resto de los estilos del botón se mantienen */
  width: 28px;
  height: 28px;
  padding: 0;
  margin: 0;
  border-radius: 50%;
  background: var(--header-hover);
  border: 1px solid var(--input-border);
  color: var(--text-gold);
  font-size: 1.5em;
  font-weight: bold;
  line-height: 26px;
  transition: all 0.2s ease;
}

/* Estilos para el nuevo botón circular de añadir */
.add-item-btn {
  /* Reseteamos estilos de botón genéricos */
  width: 28px;
  height: 28px;
  padding: 0;
  margin: 0;

  /* Estilo circular */
  border-radius: 50%;

  /* Apariencia */
  background: var(--header-hover);
  border: 1px solid var(--input-border);
  color: var(--text-gold);

  /* Fuente y centrado del '+' */
  font-size: 1.5em;
  font-weight: bold;
  line-height: 26px;
  /* Ajuste para centrar el '+' verticalmente */

  /* Transición suave */
  transition: all 0.2s ease;
}

.add-item-btn:hover {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  color: white;
  transform: scale(1.1) rotate(90deg);
  /* Efecto de rotación al pasar el ratón */
}

/* El canvas en la ventana del jugador donde se dibujará la previsualización */
#aoeCanvas {
  z-index: 5;
  /* Por encima de la niebla, pero debajo de las fichas */
  opacity: 0.6;
  /* Semi-transparente para ver el mapa debajo */
}

/* Grupo de botones para seleccionar la forma del AoE */
#aoeShapeSelector {
  display: grid;
  /* Usamos grid para que los botones se alineen perfectamente */
  grid-template-columns: repeat(5, 1fr);
  gap: 5px;
}

#aoeShapeSelector button {
  padding: 8px 5px;
  font-size: 0.9em;
  margin-top: 0;
}

/* Estilo para el botón de forma que está activo */
#aoeShapeSelector button.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  color: #fff;
  box-shadow: 0 0 10px #5dc66f;
}

/* El contenedor de los parámetros de cada forma */
#aoeParamsContainer .form-group {
  margin-bottom: 0;
}

/* ===== ESTILOS PARA SELECCIÓN MÚLTIPLE (AÑADIR A STYLE.CSS) ===== */

/* Estilo para el botón flotante en la vista del jugador */
#multiSelectBtn {
  width: 50px;
  height: 50px;
  padding: 0;
  margin: 0;
  border-radius: 8%;
  /* Por encima del mapa y otros elementos */
  background: var(--header-bg);
  border: 2px solid var(--input-border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease-in-out;
}

#multiSelectBtn:hover {
  transform: scale(1.1);
  border-color: var(--text-gold);
}

/* Estilo para cuando el modo de selección múltiple está ACTIVO */
#multiSelectBtn.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  box-shadow: 0 0 15px rgba(93, 198, 111, 0.6);
}

/* Icono para el botón */
#multiSelectBtn .btn-icon.icon-multi-select {
  background-image: url("assets/images/icons/unicotoken_icon.png");
  width: 28px;
  height: 28px;
  transition: transform 0.3s ease;
}

#multiSelectBtn.active .btn-icon.icon-multi-select {
  transform: scale(1.1);
  background-image: url("assets/images/icons/seleccionmultiple_icon.png");
}

/* Estilo para las fichas que están en el grupo de selección múltiple */
.token.multi-selected {
  box-shadow: 0 0 15px 5px #4a90e2, 0 0 5px 2px #fff;
  /* Sombra azul para diferenciar de la selección normal */
  outline: 2px dashed #4a90e2;
  outline-offset: 2px;
}
.player-controls-container {
  position: fixed;
  top: 20px;
  left: 20px; /* Posición inicial a la izquierda */
  z-index: 20;
  display: flex;
  flex-direction: column; /* Apila los botones verticalmente */
  gap: 10px; /* Espacio entre los botones */
  transition: left 0.4s ease-in-out, right 0.4s ease-in-out; /* Transición suave */
}

/* Estilo para el botón de cambio de posición */
#toggleTrackerPosBtn {
  width: 50px;
  height: 50px;
  padding: 0;
  margin: 0;
  border-radius: 8%;
  background: var(--header-bg);
  border: 2px solid var(--input-border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease-in-out;
}

#toggleTrackerPosBtn:hover {
  transform: scale(1.1);
  border-color: var(--text-gold);
}

/* Icono para el botón de cambio de posición (flechas) */
.icon-swap-position {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="peru" width="28px" height="28px"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M6.99 11L3 15l3.99 4v-3H14v-2H6.99v-3zM21 9l-3.99-4v3H10v2h7.01v3L21 9z"/></svg>');
  width: 28px;
  height: 28px;
  transition: transform 0.3s ease;
}

#toggleTrackerPosBtn:hover .icon-swap-position {
  transform: rotate(180deg);
}

/* --- LÓGICA DE POSICIONAMIENTO --- */

/* Por defecto, el tracker está a la derecha */
#playerTurnTracker {
  position: fixed;
  top: 20px;
  right: 20px;
  left: auto; /* Nos aseguramos que 'left' no interfiera */
  transition: left 0.4s ease-in-out, right 0.4s ease-in-out;
  /* ... otros estilos del tracker se mantienen */
}

/* Cuando el tracker tiene la clase .tracker-left, se mueve a la izquierda */
#playerTurnTracker.tracker-left {
  right: auto; /* Anulamos 'right' */
  left: 20px; /* Activamos 'left' */
}

/* Cuando los controles tienen la clase .controls-right, se mueven a la derecha */
.player-controls-container {
  position: fixed;
  top: 20px;
  left: 20px; /* Posición inicial a la izquierda */
  z-index: 20;
  display: flex;
  flex-direction: column; /* Apila los botones verticalmente */
  gap: 10px; /* Espacio entre los botones */
  transition: left 0.4s ease-in-out, right 0.4s ease-in-out;
}
.player-controls-container.controls-right {
  left: auto; /* Anulamos 'left' */
  right: 20px; /* Activamos 'right' */
}
.control-group {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* Estilo para el separador */
.control-separator {
  height: 2px;
  background: var(--input-border);
  margin: 10px 5px; /* Margen vertical y un poco horizontal */
  border-radius: 1px;
}

/* Estilo base para los nuevos botones de dibujo */
.draw-tool-btn {
  width: 50px;
  height: 50px;
  padding: 0;
  margin: 0;
  border-radius: 8%;
  border: 2px solid var(--input-border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease-in-out;
}

.draw-tool-btn:hover {
  border-color: var(--text-gold);
}

/* Estilo para cuando un botón de dibujo está activo */
.draw-tool-btn.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
}

/* Ocultar los controles de dibujo */
#drawingControls.controls-hidden {
  display: none;
}
.token-editor-nav {
  margin-bottom: 15px;
  border-bottom: 2px solid var(--input-border);
}

.token-editor-nav ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  gap: 5px;
}

.token-nav-button {
  font-family: "IM Fell English SC", serif;
  font-size: 1em;
  color: #a0a0a0;
  background: none;
  border: none;
  padding: 10px 15px;
  margin: 0;
  cursor: pointer;
  border-bottom: 3px solid transparent;
  transition: all 0.2s ease;
  border-radius: 5px 5px 0 0;
}

.token-nav-button:hover {
  background-color: var(--header-hover);
  color: var(--text-light);
}

.token-nav-button.active {
  color: var(--text-gold);
  background-color: var(--content-bg);
  border-bottom-color: var(--panel-border);
}

.token-editor-content {
  background-color: var(--content-bg);
  padding: 15px;
  border-radius: 0 0 8px 8px;
  border: 1px solid var(--input-border);
  border-top: none;
}

.token-view-panel {
  display: none; /* Ocultos por defecto */
}

.token-view-panel.active {
  display: block; /* Visible el activo */
}
/* ===== ESTILOS PARA TARJETAS EDITABLES Y MODAL ===== */

/* Hacer que las tarjetas parezcan clickables */
.info-card {
  cursor: pointer;
}

/* Título del modal de edición */
.info-card-title-modal {
  font-family: "IM Fell English SC", serif;
  font-size: 1.5em;
  color: var(--text-gold);
  margin: 0 0 10px 0;
  padding-bottom: 10px;
  border-bottom: 1px solid var(--input-border);
}

/* Descripción en el modal de edición (modo vista) */
.info-card-desc-modal {
  font-size: 1.1em;
  color: var(--text-light);
  white-space: pre-wrap; /* Respeta saltos de línea y espacios */
  line-height: 1.6;
  max-height: 50vh; /* Evita que el modal sea gigante */
  overflow-y: auto;
  background-color: var(--input-bg);
  padding: 10px;
  border-radius: 5px;
}

/* Ajustes para el textarea en el modal de edición */
#editCardModal textarea {
  min-height: 150px;
  font-size: 1.1em;
  line-height: 1.5;
}
.credits {
  color: var(--text-gold);
  writing-mode: vertical-rl;
  position: absolute; /* Lo sacamos del flujo normal */
  bottom: 65px; /* Lo pegamos abajo (respetando el padding vertical) */
  left: 0px; /* Lo pegamos a la derecha (respetando el padding horizontal) */
}
.r_dev_logo {
  background-image: url("assets/images/icons/r_dev_logo.png");
  width: 24px;
  height: 24px;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  position: absolute;
  margin-top: 10px; /* Un poco de espacio por si acaso */
  transform: translateX(50%);
  bottom: 30px; /* Lo pegamos abajo (respetando el padding vertical) */
  cursor: pointer;
}
.credits-modal-content {
  max-width: 800px !important;
  padding: 30px 35px !important;
  text-align: center;
  background: var(--content-bg) !important;
}

.creator-profile {
  margin-bottom: 25px;
}

.creator-avatar-container {
  width: 105px;
  height: 78.5px;
  margin: 0 auto 15px;
}

.creator-avatar {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.creator-name {
  font-family: "IM Fell English SC", serif;
  font-size: 2.2em;
  color: var(--text-gold);
  margin: 0;
  padding: 0;
  border: none; /* Sobrescribe estilos de h2 genéricos */
  text-shadow: 1px 1px 3px #000;
}

.creator-title {
  font-family: "Cinzel", serif;
  font-size: 1.1em;
  color: var(--text-light);
  margin: 5px 0 0 0;
  font-style: italic;
  opacity: 0.9;
}

.separator-line {
  height: 1px;
  background: linear-gradient(
    to right,
    transparent,
    var(--panel-border),
    transparent
  );
  margin: 25px 0;
  border: none;
}

.project-description {
  font-size: 1.1em;
  line-height: 1.6;
  color: #d0d0d0;
  max-width: 900px;
  margin: 0 auto 30px;
}

.social-links-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 15px;
}

.social-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 10px;
  padding: 20px 10px;
  background: var(--panel-bg);
  border: 2px solid var(--input-border);
  border-radius: 10px;
  color: var(--text-light);
  text-decoration: none;
  font-family: "IM Fell English SC", serif;
  font-size: 1em;
  transition: all 0.2s ease-in-out;
  min-height: 110px;
}

.social-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.social-card-icon {
  width: 36px;
  height: 36px;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  transition: transform 0.3s ease;
}

.social-card:hover .social-card-icon {
  transform: scale(1.1);
}

.social-card-text {
  color: #c0c0c0;
  transition: color 0.2s ease;
}

.social-card:hover .social-card-text {
  color: var(--text-gold);
}

/* Colores específicos para cada tarjeta al pasar el ratón */
/* colores para cada uno
#portfolio-card:hover { border-color: #e6c253; }
#github-card:hover    { border-color: #a0a0a0; }
#linkedin-card:hover  { border-color: #2867B2; }
*/

/* Colores específicos para cada tarjeta al pasar el ratón */
#portfolio-card:hover {
  border-color: #e6c253;
}
#github-card:hover {
  border-color: #e6c253;
}
#linkedin-card:hover {
  border-color: #e6c253;
}

/* Iconos SVG como Data URI para no necesitar más archivos */
.icon-portfolio {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23e0e0e0"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/></svg>');
}
#portfolio-card:hover .icon-portfolio {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23e6c253"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/></svg>');
}

.icon-github {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23e0e0e0"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.6-4-1.6-.5-1.4-1.3-1.8-1.3-1.8-1-1 .1-1 .1-1 1.1.1 1.7 1.2 1.7 1.2.9 1.6 2.5 1.2 3.1.9.1-.7.4-1.2.8-1.5-2.4-.3-4.9-1.2-4.9-5.3 0-1.2.4-2.1 1.1-2.9-.1-.3-.5-1.4.1-2.8 0 0 .9-.3 3.1 1.2a10.4 10.4 0 0 1 5.6 0c2.2-1.5 3.1-1.2 3.1-1.2.6 1.4.2 2.5.1 2.8.7.7 1.1 1.7 1.1 2.9 0 4.1-2.5 5-4.9 5.3.4.3.8 1 .8 1.9v2.8c0 .3.2.7.8.6A12 12 0 0 0 12 .3Z"/></svg>');
}
#github-card:hover .icon-github {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23a0a0a0"><path d="M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.6-4-1.6-.5-1.4-1.3-1.8-1.3-1.8-1-1 .1-1 .1-1 1.1.1 1.7 1.2 1.7 1.2.9 1.6 2.5 1.2 3.1.9.1-.7.4-1.2.8-1.5-2.4-.3-4.9-1.2-4.9-5.3 0-1.2.4-2.1 1.1-2.9-.1-.3-.5-1.4.1-2.8 0 0 .9-.3 3.1 1.2a10.4 10.4 0 0 1 5.6 0c2.2-1.5 3.1-1.2 3.1-1.2.6 1.4.2 2.5.1 2.8.7.7 1.1 1.7 1.1 2.9 0 4.1-2.5 5-4.9 5.3.4.3.8 1 .8 1.9v2.8c0 .3.2.7.8.6A12 12 0 0 0 12 .3Z"/></svg>');
}

.icon-linkedin {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23e0e0e0"><path d="M22.23 0H1.77C.8 0 0 .77 0 1.72v20.56C0 23.23.8 24 1.77 24h20.46c.98 0 1.77-.77 1.77-1.72V1.72C24 .77 23.2 0 22.23 0zM7.12 20.45H3.54V9h3.58v11.45zM5.33 7.42c-1.14 0-2.07-.93-2.07-2.07s.93-2.07 2.07-2.07 2.07.93 2.07 2.07c0 1.14-.93 2.07-2.07 2.07zm15.12 13.03h-3.58V14.6c0-1.39-.03-3.18-1.94-3.18-1.94 0-2.24 1.51-2.24 3.08v5.95h-3.58V9h3.44v1.57h.05c.48-.9 1.65-1.85 3.39-1.85 3.63 0 4.29 2.39 4.29 5.49v6.29z"/></svg>');
}
#linkedin-card:hover .icon-linkedin {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%232867B2"><path d="M22.23 0H1.77C.8 0 0 .77 0 1.72v20.56C0 23.23.8 24 1.77 24h20.46c.98 0 1.77-.77 1.77-1.72V1.72C24 .77 23.2 0 22.23 0zM7.12 20.45H3.54V9h3.58v11.45zM5.33 7.42c-1.14 0-2.07-.93-2.07-2.07s.93-2.07 2.07-2.07 2.07.93 2.07 2.07c0 1.14-.93 2.07-2.07 2.07zm15.12 13.03h-3.58V14.6c0-1.39-.03-3.18-1.94-3.18-1.94 0-2.24 1.51-2.24 3.08v5.95h-3.58V9h3.44v1.57h.05c.48-.9 1.65-1.85 3.39-1.85 3.63 0 4.29 2.39 4.29 5.49v6.29z"/></svg>');
}

/* --- ESTILOS PARA NOTIFICACIONES TOAST --- */
#notification-container {
  position: fixed;
  top: 80px; /* Debajo del header */
  right: 20px;
  z-index: 2000; /* Por encima de todo, incluso los modales */
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 10px;
  pointer-events: none; /* Para poder hacer clic "a través" del contenedor */
}

.notification-toast {
  background-color: rgba(31, 22, 20, 0.95); /* var(--panel-bg) con opacidad */
  color: var(--text-light);
  padding: 12px 20px;
  border-radius: 8px;
  border: 1px solid var(--panel-border);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  pointer-events: auto; /* Los toasts sí se pueden clickear (si tuvieran botones) */
  animation: slideInAndFadeOut 4s ease-in-out forwards;
  display: flex;
  align-items: center;
  gap: 10px;
  font-family: "Cinzel", serif;
  font-size: 1.1em;
}

.notification-toast::before {
  content: "✨"; /* Un icono simple para la notificación */
  font-size: 1.2em;
}

/* Animación para que la notificación aparezca y desaparezca */
@keyframes slideInAndFadeOut {
  0% {
    opacity: 0;
    transform: translateX(100%);
  }
  15%,
  85% {
    opacity: 1;
    transform: translateX(0);
  }
  100% {
    opacity: 0;
    transform: translateX(100%);
  }
}

/* --- ESTILOS PARA MODAL DE DIÁLOGO PERSONALIZADO --- */
.custom-modal-content {
  max-width: 450px !important;
  text-align: center;
  padding-top: 50px !important; /* Espacio para el icono */
  border-width: 3px !important;
  transition: border-color 0.3s ease;
}

.custom-modal-icon {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background-color: var(--panel-bg);
  border: 3px solid; /* El color se define por tipo */
  display: flex;
  align-items: center;
  justify-content: center;
  background-size: 55%;
  background-position: center;
  background-repeat: no-repeat;
  transition: border-color 0.3s ease;
}

#customModalTitle {
  margin-bottom: 10px;
}

#customModalMessage {
  font-size: 1.1em;
  line-height: 1.6;
  color: var(--text-light);
  margin-bottom: 25px;
  white-space: pre-wrap; /* Respeta saltos de línea */
}

#customModalButtons button {
  font-size: 1.1em;
}

/* --- Variantes de Tipo --- */

/* Success (Verde) */
.modal-type-success .custom-modal-content,
.modal-type-success .custom-modal-icon {
  border-color: #5dc66f;
}
.modal-type-success .custom-modal-icon {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%235dc66f"><path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"/></svg>');
}
.modal-type-success #customModalTitle {
  color: #5dc66f;
}

/* Warning (Amarillo/Dorado) */
.modal-type-warning .custom-modal-content,
.modal-type-warning .custom-modal-icon {
  border-color: var(--text-gold);
}
.modal-type-warning .custom-modal-icon {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23e6c253"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>');
}
.modal-type-warning #customModalTitle {
  color: var(--text-gold);
}

/* Error (Rojo) */
.modal-type-error .custom-modal-content,
.modal-type-error .custom-modal-icon {
  border-color: #c65d5d;
}
.modal-type-error .custom-modal-icon {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23c65d5d"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>');
}
.modal-type-error #customModalTitle {
  color: #c65d5d;
}

/* Confirm (Azul/Neutral) */
.modal-type-confirm .custom-modal-content,
.modal-type-confirm .custom-modal-icon {
  border-color: #4a90e2;
}
.modal-type-confirm .custom-modal-icon {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234a90e2"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></svg>');
}
.modal-type-confirm #customModalTitle {
  color: #4a90e2;
}

#splash-screen {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: var(--bg-dark);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999; /* Asegura que esté por encima de todo */
  opacity: 1;
  transition: opacity 1s ease-out; /* Transición para el desvanecimiento */
}

/* Clase que se añadirá con JS para ocultar la pantalla */
#splash-screen.hidden {
  opacity: 0;
  pointer-events: none; /* Impide que intercepte clics cuando está oculta */
}

.splash-logo {
  width: 250px;
  max-width: 60%;
  opacity: 0;
  transform: scale(0.8);
  /* Llama a la animación */
  animation: fadeInLogo 1s ease-out forwards,
    pulseRune 2s ease-in-out 1s infinite;
}

/* Animación para que el logo aparezca */
@keyframes fadeInLogo {
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Animación para el pulso de la runa brillante */
@keyframes pulseRune {
  0%,
  100% {
    filter: drop-shadow(0 0 5px rgba(230, 194, 83, 0.4));
    transform: scale(1);
  }
  50% {
    filter: drop-shadow(0 0 25px rgba(230, 194, 83, 0.9));
    transform: scale(1.03);
  }
}
iframe {
  border: none; /* Quitar el borde predeterminado */
}

.emoji-sound {
  margin: 0;
  font-size: 2rem;
}
/*MANUAL PORTADA HTML WEB*/
.manual-body {
  background-color: #fdf1db;
  padding: 40px;
}
.img-portada {
  width: 100%;
}
.manual-body h1 {
  color: #833b0a;
}
.manual-body h2 {
  color: #833b0a;
  font-size: 1.3em;
  text-align: left;
  text-shadow: none;
  font-family: "Cinzel", serif;
}
.manual-body p {
  color: #110d0c;
  font-weight: 400;
}
.manual-body ol {
  color: #110d0c;
}
.manual-body li {
  color: #110d0c;
}
.inline-icon {
  height: 25px; /* Ajusta el tamaño como necesites */
  vertical-align: middle; /* Alinea el icono con el texto */
  margin-left: 8px;
}
.inline-icon-small {
  height: 18px; /* Un tamaño más pequeño para sub-listas */
  vertical-align: middle;
  margin-right: 5px;
}

/* Para la etiqueta <code> que resalta nombres de archivos */
code {
  background-color: #ffe7ba;
  color: #333;
  padding: 2px 5px;
  border-radius: 4px;
  font-family: "Courier New", Courier, monospace;
}

/* Estilos para los bloques de información (callouts) */
.callout {
  padding: 15px;
  margin: 20px 0;
  border-left: 5px solid;
  border-radius: 5px;
}
.callout-title {
  font-weight: bold;
  font-family: "Cinzel", serif;
  margin-bottom: 5px;
  display: flex;
  align-items: center;
}
.callout-title .icon-warning,
.callout-title .icon-tip,
.callout-title .icon-info {
  margin-right: 10px;
  /* Aquí deberías definir las clases de tus iconos, si no lo has hecho ya */
}

/* Colores específicos para cada tipo de callout */
.callout.warning {
  background-color: #fff3cd;
  border-left-color: #ffc107;
  color: #664d03;
}
.callout.tip {
  background-color: #d1ecf1;
  border-left-color: #0c5460;
  color: #0c5460;
}
.callout.info {
  background-color: #cce5ff;
  border-left-color: #004085;
  color: #004085;
}

/* Para los saltos de página al imprimir */
@media print {
  .manual-body {
    background-color: white; /* Fondo blanco para impresión */
  }
}
.manual-body h3 {
  color: #833b0a;
}
.manual-body h4 {
  color: #833b0a;
  font-family: "Cinzel", serif;
}
.button-download {
  /* Copia los estilos de tus otros botones para mantener la coherencia */
  display: inline-flex; /* Para alinear el icono y el texto */
  align-items: center;
  justify-content: center;
  padding: 10px 20px;
  background-color: var(--button-primary-bg); /* O el color que prefieras */
  color: #1d56ac;
  border: 1px solid var(--border-color);
  border-radius: 5px;
  font-family: "Cinzel", serif;
  font-weight: bold;
  text-decoration: none; /* Quita el subrayado del enlace */
  cursor: pointer;
  transition: background-color 0.2s;
}
.button-download:hover {
  text-decoration: underline;
}

/* Efecto hover para el botón */
.button-download:hover {
  background-color: var(
    --button-primary-hover-bg
  ); /* Un color ligeramente más oscuro/claro */
}

/* Estilo para el icono dentro del botón (si usas uno) */
.button-download .btn-icon {
  margin-right: 8px;
  /* Asegúrate de tener una clase .icon-download definida con tu icono */
}

/* ===== ESTILOS PARA EL NUEVO BOTÓN DE MODO DE VISIÓN ===== */

/* Estilo base para el botón y su estado hover (igual que los otros) */
#toggleVisionUpdateBtn {
  width: 50px;
  height: 50px;
  padding: 0;
  margin: 0;
  border-radius: 8%;
  background: var(--header-bg);
  border: 2px solid var(--input-border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease-in-out;
}

#toggleVisionUpdateBtn:hover {
  transform: scale(1.1);
  border-color: var(--text-gold);
}

/* Estilo para cuando el modo de visión "al soltar" está ACTIVO */
#toggleVisionUpdateBtn.active {
  background: var(--button-vision-bg);
  border-color: #5dc66f;
  box-shadow: 0 0 15px rgba(93, 198, 111, 0.6);
}

/* Icono para el botón (por defecto, modo dinámico) */
.icon-vision-toggle {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="peru" width="28px" height="28px"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5C21.27 7.61 17 4.5 12 4.5zm0 13c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/><path d="M2.92 2.92L1.5 4.34 4.11 7C2.7 8.35 1.51 10.05 1 12c1.73 4.39 6 7.5 11 7.5 1.95 0 3.8-.56 5.39-1.5l2.65 2.65 1.41-1.41L2.92 2.92z" fill="none"/><path d="M7.4 3.27L6.09 1.96 4.38 3.67C3.13 4.8 2.08 6.13 1.29 7.61l1.59 1.59C3.65 8.1 4.75 7.01 6 6.27V4.5c.48-.09.97-.14 1.47-.18zm6.65 1.39c-.5.04-.99.09-1.47.18V4.5c-1.74 0-3.33.53-4.68 1.4l1.58 1.58c1.1-.64 2.37-1.03 3.73-1.03 1.36 0 2.63.39 3.73 1.03l1.58-1.58c-1.35-.87-2.94-1.4-4.68-1.4z" transform="translate(-1, 0) scale(1.1)"/></svg>');
  width: 28px;
  height: 28px;
  transition: transform 0.3s ease;
}

/* Icono para cuando el modo "al soltar" está activo */
#toggleVisionUpdateBtn.active .icon-vision-toggle {
  background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="peru" width="28px" height="28px"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5C21.27 7.61 17 4.5 12 4.5zm0 13c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/></svg>');
}

/* ===== ESTILOS PARA PREVISUALIZACIÓN DEL PINCEL DE NIEBLA ===== */
#brushPreview {
  position: absolute;
  top: 0;
  left: 0;
  border-radius: 50%;
  border: 2px dashed rgba(255, 255, 255, 0.7);
  background-color: rgba(255, 255, 255, 0.1);
  pointer-events: none; /* Muy importante para no interferir con otros clics */
  z-index: 1001; /* Por encima de todo, excepto el cursor */
  display: none; /* Oculto por defecto */
  transform: translate(-50%, -50%); /* Para centrar el círculo en el cursor */
}

/* Cambia el borde si estamos en modo "ocultar" niebla */
#brushPreview.hide-mode {
  border-color: rgba(255, 100, 100, 0.7);
  background-color: rgba(255, 100, 100, 0.1);
}

/* ===== ESTILOS PARA ANIMACIÓN DE PING ===== */
@keyframes map-ping-animation {
  0% {
    transform: scale(0.2);
    opacity: 1;
    border-width: 5px;
  }
  80% {
    transform: scale(2);
    opacity: 0;
    border-width: 1px;
  }
  100% {
    transform: scale(2);
    opacity: 0;
    border-width: 1px;
  }
}

.map-ping {
  position: absolute;
  border-radius: 50%;
  border: 5px solid var(--text-gold);
  box-shadow: 0 0 20px var(--text-gold), inset 0 0 15px var(--text-gold);
  pointer-events: none;
  z-index: 1002; /* Por encima de todo */
  transform-origin: center center;

  /* ===== LÍNEA AÑADIDA PARA CENTRAR ===== */
  /*transform: translate(-50%, -50%);*/
}

/* Clase que se añade para activar la animación */
.map-ping.pinging {
  animation: map-ping-animation 0.7s ease-out forwards;
}

/* ===== ESTILOS PARA EL NUEVO ENCABEZADO DEL EDITOR DE TOKENS ===== */

.token-editor-header {
  display: flex;
  align-items: center; /* Centra verticalmente los elementos */
  gap: 15px; /* Espacio entre la nav y el botón */
  margin-bottom: -1px; /* Solapa el borde inferior para un look integrado */
  position: sticky ;
}

/* Hacemos que la navegación ocupe todo el espacio disponible */
.token-editor-nav {
  flex-grow: 1;
  margin-bottom: 0; /* Quitamos el margen que tenía antes */
}

/* Estilos para el nuevo botón de "Guardar Rápido" */
#quickUpdateTokenBtn {
  flex-shrink: 0; /* Evita que el botón se encoja */
  width: 45px;
  height: 45px;
  padding: 0;
  margin: 0;
  border-radius: 8px;
  background: var(--button-primary-bg);
  border: 1px solid var(--text-gold);
  display: flex;
  align-items: center;
  justify-content: center;
}

#quickUpdateTokenBtn .btn-icon {
  width: 24px;
  height: 24px;
}

#quickUpdateTokenBtn:hover {
  background: var(--button-primary-hover);
}

/* ===== ESTILOS PARA EL PANEL DE DETALLES DE FICHA SELECCIONADA (VISTA JUGADOR) ===== */
#selectedTokenDetails {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 320px;
  height: 90px;
  z-index: 15;
  background: linear-gradient(
    to right,
    rgba(31, 22, 20, 0.95),
    rgba(31, 22, 20, 0.8)
  );
  border: 1px solid var(--input-border);
  border-left: 4px solid var(--text-gold);
  border-radius: 8px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
  backdrop-filter: blur(4px);
  display: flex; /* Cambiado a flex desde JS */
  padding: 10px;
  gap: 12px;
  align-items: center;
  transition: opacity 0.3s ease, transform 0.15s ease;
  transform: translateY(20px);
  opacity: 0;
}

#selectedTokenDetails.visible {
  transform: translateY(0);
  opacity: 1;
}

.details-preview {
  width: 70px;
  height: 70px;
  flex-shrink: 0;
  border-radius: 6px;
  background-size: cover;
  background-position: center;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: "IM Fell English SC", serif;
  font-size: 3em;
  color: white;
  text-shadow: 1px 1px 3px #000;
  border: 1px solid var(--input-border);
}

.details-info {
  flex-grow: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  min-width: 0; /* Evita que el contenido empuje el layout */
}

.details-row-1 {
  display: flex;
  align-items: center;
  gap: 8px;
}

.details-badge {
  background-color: var(--header-bg);
  color: var(--text-gold);
  padding: 3px 8px;
  border-radius: 15px;
  font-size: 0.8em;
  font-weight: bold;
  white-space: nowrap;
}

.details-states {
  display: flex;
  gap: 5px;
  font-size: 1.2em;
}

.details-states span {
  cursor: help;
}

.details-name-race {
  margin: 0;
  font-family: "IM Fell English SC", serif;
  font-size: 1.4em;
  color: var(--text-light);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.details-name-race .race {
  font-family: "Cinzel", serif;
  font-style: italic;
  font-size: 0.8em;
  color: #b0b0b0;
  margin-left: 5px;
}

.details-health-bar-container {
  width: 100%;
  height: 20px;
  background-color: #1a1a1a;
  border-radius: 4px;
  overflow: hidden;
  border: 1px solid #4a3f3c;
  position: relative; /* Para posicionar el texto dentro */
}

.details-health-bar-fill {
  height: 100%;
  transition: width 0.3s ease, background-color 0.3s ease;
}

.details-health-text {
  position: absolute;
  top: 50%;
  right: 6px;
  transform: translateY(-50%);
  font-size: 0.8em;
  font-weight: bold;
  color: white;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}
/* --- INICIO: CORRECCIÓN PARA TOKEN EDITOR HEADER STICKY --- */

/* 1. Hacemos que el formulario del editor sea un contenedor flex que ocupe toda la altura. */
/*    Esto es crucial para que sus hijos puedan gestionarse verticalmente. */
#main-view-selected-token .token-editor-form {
    display: flex;
    flex-direction: column;
    height: 100%; /* Ocupa toda la altura de su contenedor padre (.panel-content) */
}

/* 2. Convertimos el header del editor en el elemento "sticky". */
/*    - top: 0; le dice dónde pegarse. */
/*    - z-index: 10; se asegura de que se muestre por encima del contenido que se desplaza. */
/*    - background-color: es VITAL para que el contenido no se transparente al pasar por debajo. */
.token-editor-header {
    position: sticky;
    top: 0;
    z-index: 10;
    background-color: var(--panel-bg); /* Usa el color de fondo del panel */
    padding-top: 10px; /* Un poco de espacio para que no se vea tan pegado arriba */
    padding-bottom: 5px;
}

/* 3. Hacemos que el contenido de las pestañas sea el área que se desplace (scroll). */
/*    - flex-grow: 1; hace que ocupe todo el espacio vertical sobrante. */
/*    - overflow-y: auto; le añade la barra de scroll vertical cuando sea necesario. */
.token-editor-content {
    flex-grow: 1;
    overflow-y: auto;
    /* Un pequeño ajuste para que el scrollbar no se pegue al borde */
    padding-right: 5px; 
}


/* --- FIN: CORRECCIÓN PARA TOKEN EDITOR HEADER STICKY --- */

/* ===== ESTILOS PARA LA NUEVA BRÚJULA CARDINAL ===== */
#cardinalRoseContainer {
  width: 120px; /* Ancho deseado para la brújula */
  margin: 15px auto; /* Espaciado vertical y centrado horizontal */
  pointer-events: none; /* Para que no interfiera con los clics en el mapa */
  filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5)); /* Sombra sutil */
}

#cardinalRoseContainer img {
  width: 100%;
  height: auto;
  display: block;
}


/* ===== AJUSTES PARA EL PANEL DE DETALLES DE FICHA SELECCIONADA ===== */
#selectedTokenDetails {
  /* Eliminamos el posicionamiento fijo, ya que ahora es un elemento normal
     dentro de #playerControlsContainer */
  position: relative; /* O static, pero relative es seguro */
  bottom: auto;
  left: auto;
  
}.player-controls-container {
    position: fixed;
    top: 20px;
    left: 20px;
    z-index: 20;
    display: flex;
    flex-direction: column;
    gap: 10px;
    transition: left 0.15s ease-in-out, right 0.15s ease-in-out;
    /* Por defecto, alinea los elementos al inicio (izquierda) */
    align-items: flex-start; 
}

/* Cuando los controles están a la derecha, alinea todo su contenido a la derecha (flex-end) */
.player-controls-container.controls-right {
    left: auto;
    right: 20px;
    align-items: flex-end; /* ¡ESTA ES LA MAGIA PARA LA ALINEACIÓN DERECHA! */
}

/* Nuevo div que agrupa solo los botones y el separador */
.player-main-controls {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* El separador ahora está dentro de un contenedor más pequeño y se comportará bien */
.control-separator {
    height: 2px;
    background: var(--input-border);
    margin: 10px 5px;
    border-radius: 1px;
}

/* Los botones no necesitan cambios, ya están en su .control-group */


/* ===== ESTILOS PARA LA BRÚJULA (CORREGIDO) ===== */
#cardinalRoseContainer {
    width: 120px;
    /* Eliminamos el centrado 'auto' y dejamos que flexbox lo alinee */
    margin: 15px 0; 
    pointer-events: none;
    filter: drop-shadow(0 2px 5px rgba(0,0,0,0.5));
}

#cardinalRoseContainer img {
    width: 100%;
    height: auto;
    display: block;
}


